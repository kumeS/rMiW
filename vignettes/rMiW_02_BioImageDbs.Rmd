---
title: "rMiW: 02. rMiW & BioImageDbs for a workflow for microscopy-based image analysis and deep learning"
author: 
- name: Satoshi Kume
  email: satoshi.kume.1984@gmail.com
date: "`r Sys.Date()`"
graphics: no
package: rMiW
output:
    BiocStyle::html_document:
        toc_float: false
vignette: >
    %\VignetteIndexEntry{rMiW}
    %\VignetteEncoding{UTF-8}
    %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r style, echo = FALSE, results = 'asis', message=FALSE}
BiocStyle::markdown()
```

**Last modified:** `r file.info("rMiW_02_BioImageDbs.Rmd")$mtime`<br />
**Compiled**: `r date()`

# Getting started

```{r echo=TRUE, eval=FALSE}
#Install
BiocManager::install("ExperimentHub", force = TRUE)
BiocManager::install("BioImageDbs", force = TRUE)
devtools::install_github( "kumeS/rMiW", force = TRUE )

#Load
library(ExperimentHub)
library(BioImageDbs)
library(rMiW)

#Removes all files in a cache file directory
#install.packages("R.cache")
R.cache::clearCache("ExperimentHub")
```

# Download 2D image dataset via BioImageDbs

```{r echo=TRUE, eval=FALSE}
#Set EH
eh <- ExperimentHub::ExperimentHub()

#Query
(qr0 <- query(eh, c("BioImageDbs", "LM_id0001")))
(qr1 <- query(eh, c("BioImageDbs", "LM_id0001_DIC_C2DH_HeLa_4dTensor_Binary")))

#LM_id0001
N <- 1
qr1[N]
str(qr1[N])

#Download the dataset of LM_id0001
ImgData <- qr1[[N]]
str(ImgData)

#Gif animation
N <- 2
GifData <- qr1[[N]]

#view
magick::image_read(GifData)
```

#Create an U-NET-based model

```{r}
#
SHAPE <- dim(ImgData$Train$Train_Original)[-1]

model <- unet(shape = SHAPE, nlevels = 3, nfilters = 16)



```

# Session information {.unnumbered}

```{r sessionInfo, echo=FALSE}
sessionInfo()
```
